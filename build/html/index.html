

<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Assignment 2, Part 1 - Project Documentation &mdash; Assignment2_1RT 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=eafc0fe6" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js?v=359c27e9"></script>
      <script src="_static/doctools.js?v=888ff710"></script>
      <script src="_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="#" class="icon icon-home">
            Assignment2_1RT
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Assignment 2, Part 1 - Project Documentation</a></li>
<li><a class="reference internal" href="#indices">Indices</a></li>
<li><a class="reference internal" href="#research-track-1-second-assignment-project-documentation">Research Track 1: Second Assignment Project Documentation</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li><a class="reference internal" href="#running-the-project">Running the project</a></li>
</ul>
</li>
<li><a class="reference internal" href="#package-description">Package description</a><ul>
<li><a class="reference internal" href="#structure-overview">Structure Overview</a></li>
</ul>
</li>
<li><a class="reference internal" href="#package-dependencies">Package dependencies</a><ul>
<li><a class="reference internal" href="#required-dependencies">Required Dependencies</a></li>
<li><a class="reference internal" href="#configuration-files">Configuration Files</a></li>
<li><a class="reference internal" href="#id5">Installation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#node-descriptions">Node Descriptions</a><ul>
<li><a class="reference internal" href="#module-scripts.action_client_node_A">Action Client Node</a><ul>
<li><a class="reference internal" href="#scripts.action_client_node_A.msg_PsVl"><code class="docutils literal notranslate"><span class="pre">msg_PsVl</span></code></a></li>
<li><a class="reference internal" href="#scripts.action_client_node_A.odom_callback"><code class="docutils literal notranslate"><span class="pre">odom_callback()</span></code></a></li>
<li><a class="reference internal" href="#scripts.action_client_node_A.pos_callback"><code class="docutils literal notranslate"><span class="pre">pos_callback()</span></code></a></li>
<li><a class="reference internal" href="#scripts.action_client_node_A.pos_client"><code class="docutils literal notranslate"><span class="pre">pos_client()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-scripts.coordinates_srv">Coordinates Service</a><ul>
<li><a class="reference internal" href="#scripts.coordinates_srv.get_coords"><code class="docutils literal notranslate"><span class="pre">get_coords()</span></code></a></li>
<li><a class="reference internal" href="#scripts.coordinates_srv.info"><code class="docutils literal notranslate"><span class="pre">info</span></code></a></li>
<li><a class="reference internal" href="#scripts.coordinates_srv.see_values"><code class="docutils literal notranslate"><span class="pre">see_values()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#ros-launch-file">ROS Launch File</a></li>
<li><a class="reference internal" href="#messages-services-and-actions">Messages, services and actions</a><ul>
<li><a class="reference internal" href="#posvel-msg">PosVel.msg</a></li>
<li><a class="reference internal" href="#sentcoords-srv">SentCoords.srv</a></li>
<li><a class="reference internal" href="#planning-action">Planning.action</a></li>
</ul>
</li>
</ul>
</div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">Assignment2_1RT</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="#" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Assignment 2, Part 1 - Project Documentation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="assignment-2-part-1-project-documentation">
<h1>Assignment 2, Part 1 - Project Documentation<a class="headerlink" href="#assignment-2-part-1-project-documentation" title="Permalink to this heading"></a></h1>
<p>Welcome to the documentation of the first part of the second project related to the Research Track 1 course.</p>
<div class="toctree-wrapper compound">
</div>
</section>
<section id="indices">
<h1>Indices<a class="headerlink" href="#indices" title="Permalink to this heading"></a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#introduction"><span class="std std-ref">Introduction</span></a></p></li>
<li><p><a class="reference internal" href="#installation"><span class="std std-ref">Prerequisites</span></a></p></li>
<li><p><a class="reference internal" href="#running-the-project"><span class="std std-ref">Running the project</span></a></p></li>
<li><p><a class="reference internal" href="#package-description"><span class="std std-ref">Package description</span></a></p></li>
<li><p><a class="reference internal" href="#package-dependencies"><span class="std std-ref">Package dependencies</span></a></p></li>
<li><p><a class="reference internal" href="#node-description"><span class="std std-ref">Node Descriptions</span></a></p></li>
<li><p><a class="reference internal" href="#launch-file"><span class="std std-ref">ROS Launch File</span></a></p></li>
<li><p><a class="reference internal" href="#messages-services-and-actions"><span class="std std-ref">Messages, services and actions</span></a></p></li>
</ul>
</section>
<section id="research-track-1-second-assignment-project-documentation">
<h1>Research Track 1: Second Assignment Project Documentation<a class="headerlink" href="#research-track-1-second-assignment-project-documentation" title="Permalink to this heading"></a></h1>
<section id="introduction">
<span id="id1"></span><h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading"></a></h2>
<p>Here is the documentation for the first part of the second project related to the Research Track 1 course. In this project, a mobile robot moves in an environment of a 3D simulator in presence of edges and obstacles (given by walls); the goal of the robot is to reach the target position sent by the user. Given by the original package, the robot has been projected in order to follow a path according to the presence of walls; dedicated nodes developed by Prof. Recchiuto in the <a class="reference external" href="https://github.com/CarmineD8/assignment_2_2024/">original package</a> are used in order to reach the target position and follow the walls when they are detected trought sensors. Click to this <a class="reference external" href="https://github.com/GiorgioMarmolino/assignment2_1_rt/">link</a> to download the whole project.</p>
<div class="images-row docutils container">
<figure class="align-left" style="width: 40%">
<img alt="Example of robot path to reach the target position." src="_images/Path2d.JPG" />
</figure>
<figure class="align-left" style="width: 50%">
<img alt="3D simulation environment." src="_images/SimulationEnvironment.JPG" />
</figure>
</div>
<p>Two nodes have been developed by me:</p>
<ul class="simple">
<li><p><strong>First node</strong> implements an action client, allowing the user to set a target (x, y) or to cancel it. It uses
the feedback/status of the action server to know when the target has been reached. The node also publishes
the robot position and velocity as a custom message (x, y, vel_x, vel_z), by relying on the values published
on the topic <cite>/odom</cite> (odometry);</p></li>
<li><p><strong>Second node</strong> implements a service node that, when called, returns the coordinates of the last target sent by the user, retrieving values from the launch file    parameters;</p></li>
</ul>
</section>
<section id="prerequisites">
<span id="installation"></span><h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this heading"></a></h2>
<p>Before executing the project, you are required to install these tools, that are essential for the smooth execution and operation of the project:</p>
<ol class="arabic simple">
<li><p><strong>Gazebo</strong>: A 3D simulator for ROS that allows you to simulate robotic environments, test algorithms, and evaluate robot behavior in a virtual setting.</p></li>
<li><p><strong>Rviz</strong>: A powerful tool for ROS visualization that enables users to view the simulated mobile robot model along with its sensors, status, and related information. Rviz is particularly useful for debugging, monitoring sensor data, and inspecting the robot’s environment.</p></li>
<li><p><strong>Python 3</strong>: Required because the code is written in Python 3, which includes important features and lbraries for robot control, data processing, and interaction with ROS nodes.</p></li>
<li><p><strong>Robot Operating System (ROS)</strong>: A flexible framework for writing robot software that provides a collection of tools, libraries, and conventions to simplify the development of complex robot behavior. ROS is essential for managing the communication between different parts of the system, including sensors, actuators, and algorithms.</p></li>
</ol>
</section>
<section id="running-the-project">
<span id="id2"></span><h2>Running the project<a class="headerlink" href="#running-the-project" title="Permalink to this heading"></a></h2>
<p>This section is about hot to install and start the simulation system. After cloning this repository into your <em>src/</em> folder of your <strong>ROS1 workspace</strong>:</p>
<ol class="arabic">
<li><p><strong>Clone the Git repository</strong>: To obtain the source code, run the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/GiorgioMarmolino/assignment2_1_rt
</pre></div>
</div>
</li>
<li><p><strong>Compile the package in ROS</strong>: Navigate to the main folder of your ROS workspace and build the package:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>catkin_make<span class="w"> </span>--only-pkg-with-deps<span class="w"> </span>assignment2_1_rt
</pre></div>
</div>
</li>
<li><p><strong>Launch the project</strong>: Once the compilation is complete, run the launch file to start the project:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>roslaunch<span class="w"> </span>assignment2_1_rt<span class="w"> </span>assignment1.launch
</pre></div>
</div>
</li>
</ol>
<p>To manage the project and see it all, it is not mandatory but it is higly recommended to open more windows:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>in the first window execute the roslaunch command: here you will use this window to send commands about the target position or to cancel the goal sent to the action service;</p></li>
<li><p>the second window is usefull whenever you want to check the goal sent to the action service, by using the command rosservice call <em>/SentCoord</em>;</p></li>
<li><p>the third window can be used to check the values published as a custom message on the topic <em>/posVel</em>; this can be done using the command;</p></li>
</ol>
</div></blockquote>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rostopic<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>/posVel
</pre></div>
</div>
</section>
</section>
<section id="package-description">
<span id="id3"></span><h1>Package description<a class="headerlink" href="#package-description" title="Permalink to this heading"></a></h1>
<p>This ROS package provides a complete environment for developing and testing autonomous navigation algorithms. The robot can be controlled via ROS services and pre-defined action servers, while the Gazebo simulation ensures realistic behavior. Additionally, RViz integration allows real-time monitoring of the robot’s position and actions. Since the package is designed for simulation and control of a mobile robot, <strong>Gazebo</strong> is for physics simulation and <strong>RViz</strong> is used for visualization. The package structure is organized into multiple directories to separate configuration files, ROS nodes, and simulation assets.</p>
<figure class="align-center">
<img alt="3D simulation environment." src="_images/packageStructure.JPG" />
</figure>
<section id="structure-overview">
<h2>Structure Overview<a class="headerlink" href="#structure-overview" title="Permalink to this heading"></a></h2>
<ul>
<li><p><strong>Configuration and Build Files</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code>, <code class="docutils literal notranslate"><span class="pre">package.xml</span></code>: Required files for package configuration and compilation.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Doxyfile.in</span></code>, <code class="docutils literal notranslate"><span class="pre">Makefile</span></code>: Used for automatic documentation generation.</p></li>
</ul>
</li>
<li><p><strong>Custom Messages, Services, and Actions</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">msg/PosVel.msg</span></code>: Defines a custom ROS message for inter-node communication.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">srv/SentCoords.srv</span></code>: Defines a ROS service for handling coordinate data.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">action/Planning.action</span></code>: Defines an action for long-term tasks, such as movement control.</p></li>
</ul>
</li>
<li><p><strong>RViz Configuration Files</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">config/sim.rviz</span></code>, <code class="docutils literal notranslate"><span class="pre">config/sim2.rviz</span></code>: Configuration files for RViz visualization.</p></li>
</ul>
</li>
<li><p><strong>Launch Files</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">launch/assignment1.launch</span></code>, <code class="docutils literal notranslate"><span class="pre">launch/sim_w1.launch</span></code>: ROS launch files that start the simulation and required nodes.</p></li>
</ul>
</li>
<li><p><strong>ROS Nodes (Python Scripts)</strong></p>
<p>The <code class="docutils literal notranslate"><span class="pre">scripts/</span></code> directory contains various ROS nodes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">action_client_node_A.py</span></code>: Action client node for executing <code class="docutils literal notranslate"><span class="pre">Planning.action</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bug_as.py</span></code>: This script implements a ROS action that allows a mobile robot to reach a target position while avoiding obstacles when necessary.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">coordinates_srv.py</span></code>, <code class="docutils literal notranslate"><span class="pre">go_to_point_service.py</span></code>, <code class="docutils literal notranslate"><span class="pre">wall_follow_service.py</span></code>: ROS services for robot control, including waypoint navigation, wall-following behavior and information retrieving.</p></li>
</ul>
</li>
<li><p><strong>Gazebo Simulation Files</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">urdf/robot2_laser.gazebo</span></code>, <code class="docutils literal notranslate"><span class="pre">urdf/robot2_laser.xacro</span></code>: URDF model files defining the robot for Gazebo simulation.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">world/assignment.world</span></code>: Defines the simulated environment for testing the robot.</p></li>
</ul>
</li>
</ul>
</section>
</section>
<section id="package-dependencies">
<span id="id4"></span><h1>Package dependencies<a class="headerlink" href="#package-dependencies" title="Permalink to this heading"></a></h1>
<p>This package relies on multiple ROS components for navigation, messaging, and action management. The dependencies are defined in both the <code class="docutils literal notranslate"><span class="pre">package.xml</span></code> and <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> files.</p>
<section id="required-dependencies">
<h2>Required Dependencies<a class="headerlink" href="#required-dependencies" title="Permalink to this heading"></a></h2>
<p>The following ROS packages are required for building and running this package:</p>
<ul class="simple">
<li><dl class="simple">
<dt><strong>Core ROS Libraries</strong>:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">roscpp</span></code> : C++ client library for ROS.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rospy</span></code> : Python client library for ROS.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">catkin</span></code> : ROS build system.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>Messaging and Services</strong>:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">std_msgs</span></code> :Standard ROS message types (e.g., strings, integers, booleans).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">std_srvs</span></code> : Standard ROS service definitions.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">message_generation</span></code> : Required for generating custom messages, services, and actions.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">message_runtime</span></code> : Allows the use of generated messages in runtime.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>Navigation and Coordinate Transformations</strong>:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">geometry_msgs</span></code> : Messages for positions, velocities, and transformations.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nav_msgs</span></code> : Provides message types for navigation, such as odometry and path planning.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tf</span></code> : Handles transformations between coordinate frames.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>Action and Communication Services</strong>:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">actionlib</span></code> : ROS library for implementing action servers and clients.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">actionlib_msgs</span></code> : Standard message definitions for ROS actions.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>Sensor Integration</strong>:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">sensor_msgs</span></code> : Defines messages for sensor data (e.g., laser scanners, cameras, IMUs).</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="configuration-files">
<h2>Configuration Files<a class="headerlink" href="#configuration-files" title="Permalink to this heading"></a></h2>
<p>The dependencies are declared in the following files:</p>
<ul class="simple">
<li><p><strong>`package.xml`</strong>: Specifies build-time and run-time dependencies using <cite>&lt;depend&gt;</cite> tags.</p></li>
<li><p><strong>`CMakeLists.txt`</strong>: Defines dependencies using <code class="docutils literal notranslate"><span class="pre">find_package(catkin</span> <span class="pre">REQUIRED</span> <span class="pre">COMPONENTS</span> <span class="pre">...)</span></code>.</p></li>
</ul>
</section>
<section id="id5">
<h2>Installation<a class="headerlink" href="#id5" title="Permalink to this heading"></a></h2>
<p>To ensure all dependencies are installed, run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rosdep<span class="w"> </span>install<span class="w"> </span>--from-paths<span class="w"> </span>src<span class="w"> </span>--ignore-src<span class="w"> </span>-r<span class="w"> </span>-y
</pre></div>
</div>
<p>This command automatically installs missing dependencies based on the <code class="docutils literal notranslate"><span class="pre">package.xml</span></code> file.</p>
</section>
</section>
<section id="node-descriptions">
<span id="node-description"></span><h1>Node Descriptions<a class="headerlink" href="#node-descriptions" title="Permalink to this heading"></a></h1>
<section id="module-scripts.action_client_node_A">
<span id="action-client-node"></span><h2>Action Client Node<a class="headerlink" href="#module-scripts.action_client_node_A" title="Permalink to this heading"></a></h2>
<dl class="py data">
<dt class="sig sig-object py" id="scripts.action_client_node_A.msg_PsVl">
<span class="sig-prename descclassname"><span class="pre">scripts.action_client_node_A.</span></span><span class="sig-name descname"><span class="pre">msg_PsVl</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">pos_x:</span> <span class="pre">0.0</span> <span class="pre">pos_y:</span> <span class="pre">0.0</span> <span class="pre">vel_x:</span> <span class="pre">0.0</span> <span class="pre">vel_z:</span> <span class="pre">0.0</span></em><a class="headerlink" href="#scripts.action_client_node_A.msg_PsVl" title="Permalink to this definition"></a></dt>
<dd><span class="target" id="module-action_client_node"></span><dl class="field-list simple">
<dt class="field-odd">Platform<span class="colon">:</span></dt>
<dd class="field-odd"><p>Unix</p>
</dd>
<dt class="field-even">Synopsis<span class="colon">:</span></dt>
<dd class="field-even"><p>Python module for the action_client_node</p>
</dd>
</dl>
<p>This node implements an action client that allow the user to set the coordinates of a target position ( [x y] coordinates) that the
mobile robot has to reach; going deeper, writing with the keyboard on the terminal line, the user send to the action
server the new coordinates by the topic <em>/reaching_goal</em>. Once the node is running, a message will be displayed
asking the user to send coordinates of the target; once the message is sent, the user is allowed to cancel the
sent goal by sending a <em>“k”</em> until the robot reach the target (this is implemented relying on the feedback/status
of the action server); otherwise the robot will work until it reach the target. Since the node is required to
publish as a custom message the position and velocity of the robot relying on the values published on the
topic <em>/odom</em>, inside of it we can find:</p>
<ul class="simple">
<li><p>a subscriber to the topic <em>/odom</em>;</p></li>
<li><p>a publisher on the topic <em>/posVel</em>;</p></li>
<li><p>function <em>pos_callback()</em> implemented in order to take values from the <em>/odom</em> topic and publish it on the <em>/posVel</em> topic;</p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="scripts.action_client_node_A.odom_callback">
<span class="sig-prename descclassname"><span class="pre">scripts.action_client_node_A.</span></span><span class="sig-name descname"><span class="pre">odom_callback</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg_PsVl</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/action_client_node_A.html#odom_callback"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.action_client_node_A.odom_callback" title="Permalink to this definition"></a></dt>
<dd><p>This callback is used to retrieve values from <em>/odom</em> topic; values will be saved on global variables that can be used by the client node.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="scripts.action_client_node_A.pos_callback">
<span class="sig-prename descclassname"><span class="pre">scripts.action_client_node_A.</span></span><span class="sig-name descname"><span class="pre">pos_callback</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/action_client_node_A.html#pos_callback"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.action_client_node_A.pos_callback" title="Permalink to this definition"></a></dt>
<dd><p>This function is designed in order to transfer values from <em>/odom</em> topic to a custom message that will be published
on the topic <em>/posVel</em>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="scripts.action_client_node_A.pos_client">
<span class="sig-prename descclassname"><span class="pre">scripts.action_client_node_A.</span></span><span class="sig-name descname"><span class="pre">pos_client</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/action_client_node_A.html#pos_client"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.action_client_node_A.pos_client" title="Permalink to this definition"></a></dt>
<dd><p>This is the main function of the <em>action client node</em>; it is designed in order to create the connection to the server
used to compute values of <code class="docutils literal notranslate"><span class="pre">geometry_msgs::Twist</span></code> provided to the robot to reach the target position.
Getting deeper, this node ask to the user to provide (x,y) target coordinates (as float values) and redirect this file as <em>goal values</em> to the
server; in this procedure the node returns a message about success of coordinates redirection displaying a log-info message confirming that coordinates
with given value have been sent to the server successfully. It is possible to cancel the sent coordinates by pressing the “<em>k</em>” button on the keyboard.
The node has been designed in order to perform a check on possible input from the keyboard, and if a “<em>k</em>” char is detected, the client will cancel the
goal previously sent. Otherwise, once the robot has reach the target position, the node will dialplay a log-info message “Robot has been
reached the target position”. To avoid errors in runtime, a try-except clause has been added to catch exceptions on wrong values for the target
coordinates and to catch other types of errors.</p>
</dd></dl>

</section>
<section id="module-scripts.coordinates_srv">
<span id="coordinates-service"></span><h2>Coordinates Service<a class="headerlink" href="#module-scripts.coordinates_srv" title="Permalink to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="scripts.coordinates_srv.get_coords">
<span class="sig-prename descclassname"><span class="pre">scripts.coordinates_srv.</span></span><span class="sig-name descname"><span class="pre">get_coords</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/coordinates_srv.html#get_coords"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.coordinates_srv.get_coords" title="Permalink to this definition"></a></dt>
<dd><span class="target" id="module-coordinate_srv"></span><dl class="field-list simple">
<dt class="field-odd">Platform<span class="colon">:</span></dt>
<dd class="field-odd"><p>Unix</p>
</dd>
<dt class="field-even">Synopsis<span class="colon">:</span></dt>
<dd class="field-even"><p>Python module for the coordinate_srv</p>
</dd>
</dl>
<p>This is the main function of the service node, it is used to initialize the service node, implement the service and spin it.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="scripts.coordinates_srv.info">
<span class="sig-prename descclassname"><span class="pre">scripts.coordinates_srv.</span></span><span class="sig-name descname"><span class="pre">info</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Last</span> <span class="pre">target</span> <span class="pre">sent</span> <span class="pre">coordinates:</span> <span class="pre">'</span></em><a class="headerlink" href="#scripts.coordinates_srv.info" title="Permalink to this definition"></a></dt>
<dd><p>This node is a service node, so it means that it implements a communication of type request/response; this node use the SentCoords service
(inside the folder <em>/srv</em> we can find <em>SentCoords.srv</em>); in detail this service is composed only by the response part since it is required to return
two values related to the last target position coordinates sent by the user, and there isn’t any client that makes a request. The <em>.srv</em> response
part is composed of a message (so a string) and two <em>float32</em> values; for calling the service it is sufficient to use the command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rosservice<span class="w"> </span>call<span class="w"> </span>/SentCoord
</pre></div>
</div>
<p>and it will return:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>- Info:      &quot;Last target sent coordinates: &quot;
- Pos_x_sent: [value]
- Pos_y_sent: [value]
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="scripts.coordinates_srv.see_values">
<span class="sig-prename descclassname"><span class="pre">scripts.coordinates_srv.</span></span><span class="sig-name descname"><span class="pre">see_values</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/coordinates_srv.html#see_values"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.coordinates_srv.see_values" title="Permalink to this definition"></a></dt>
<dd><p>This function retrieves values from the list of parameters using the <strong>rospy.get_param</strong> function, and then it load these values in two
global variables dedicated to the (x,y) coordinate target values.</p>
</dd></dl>

</section>
</section>
<section id="ros-launch-file">
<span id="launch-file"></span><h1>ROS Launch File<a class="headerlink" href="#ros-launch-file" title="Permalink to this heading"></a></h1>
<p>This launch file starts several nodes from the <cite>assignment2_1_rt</cite> package.
It also includes another launch file, <cite>sim_w1.launch</cite>, and sets some initial parameters.</p>
<p><strong>Launch file content:</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span class="nt">&lt;launch&gt;</span>
<span class="w">    </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find assignment2_1_rt)/launch/sim_w1.launch&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;target_x&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;target_y&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;1.0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;assignment2_1_rt&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;wall_follow_service.py&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;wall_follower&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;assignment2_1_rt&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;go_to_point_service.py&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;go_to_point&quot;</span><span class="w">  </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;assignment2_1_rt&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;bug_as.py&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;bug_action_service&quot;</span><span class="w"> </span><span class="na">output=</span><span class="s">&quot;screen&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>

<span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;assignment2_1_rt&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;action_client_node_A.py&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;bug_action_client&quot;</span><span class="w"> </span><span class="na">output=</span><span class="s">&quot;screen&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;assignment2_1_rt&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;coordinates_srv.py&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;coordinates_service&quot;</span><span class="w"> </span><span class="na">output=</span><span class="s">&quot;screen&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/launch&gt;</span>
</pre></div>
</div>
<dl class="simple">
<dt><strong>Node descriptions:</strong></dt><dd><ul class="simple">
<li><p><strong>wall_follower</strong>: Node that follows walls.</p></li>
<li><p><strong>go_to_point</strong>: Implements a service to move the robot toward a point.</p></li>
<li><p><strong>bug_action_service</strong>: Implements an action for the robot’s movement.</p></li>
<li><p><strong>bug_action_client</strong>: Client to interact with the navigation service.</p></li>
<li><p><strong>coordinates_service</strong>: Service that provides the coordinates of the last target.</p></li>
</ul>
</dd>
<dt><strong>Initial parameters:</strong></dt><dd><ul class="simple">
<li><p><cite>target_x = 0.0</cite></p></li>
<li><p><cite>target_y = 1.0</cite></p></li>
</ul>
</dd>
</dl>
<p>The launch file also includes <cite>sim_w1.launch</cite>, which may start the simulator and other necessary components (given by the original package of the assignment).</p>
</section>
<section id="messages-services-and-actions">
<span id="id6"></span><h1>Messages, services and actions<a class="headerlink" href="#messages-services-and-actions" title="Permalink to this heading"></a></h1>
<section id="posvel-msg">
<h2>PosVel.msg<a class="headerlink" href="#posvel-msg" title="Permalink to this heading"></a></h2>
<p>This message is used in order to represent a 2D position in space (so altitude excluded) and a velocity.</p>
<p><strong>Message definition:</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>float32 pos_x
float32 pos_y
float32 vel_x
float32 vel_z
</pre></div>
</div>
<dl class="simple">
<dt><strong>Fields:</strong></dt><dd><ul class="simple">
<li><p><strong>pos_x</strong>: <em>x</em>-axis robot position;</p></li>
<li><p><strong>pos_y</strong>: <em>y</em>-axis robot position;</p></li>
<li><p><strong>vel_x</strong>: <em>x</em>-axis robot linear velocity;</p></li>
<li><p><strong>vel_z</strong>: <em>z</em>-axis robot angular velocity;</p></li>
</ul>
</dd>
</dl>
</section>
<section id="sentcoords-srv">
<h2>SentCoords.srv<a class="headerlink" href="#sentcoords-srv" title="Permalink to this heading"></a></h2>
<p>This service has been defined in order to retrieve the target position from the target position parameters inside the launch file.</p>
<p><strong>Service definition:</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>---
string Info
float32 Pos_x_sent
float32 Pos_y_sent
</pre></div>
</div>
<p><strong>Fields:</strong></p>
<ul class="simple">
<li><p><strong>Request</strong>: No parameters;</p></li>
<li><dl class="simple">
<dt><strong>Response</strong>:</dt><dd><ul>
<li><p><strong>x</strong>: <em>x</em>-axis target position;</p></li>
<li><p><strong>y</strong>: <em>y</em>-axis target position;</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="planning-action">
<h2>Planning.action<a class="headerlink" href="#planning-action" title="Permalink to this heading"></a></h2>
<p>The <em>Planning</em> action is designed to move a robot to a target position defined by a <strong>PoseStamped</strong>. The action accepts a target pose, and during execution, provides periodic feedback on the robot’s current position, along with the movement status.</p>
<ul>
<li><p><strong>Goal</strong></p>
<blockquote>
<div><ul class="simple">
<li><p><em>target_pose</em> (<code class="docutils literal notranslate"><span class="pre">geometry_msgs/PoseStamped</span></code>): The target position the robot should reach, represented as a <strong>PoseStamped</strong> message. It includes the position (x, y, z) and orientation (roll, pitch, yaw) of the robot relative to a reference frame.</p></li>
</ul>
</div></blockquote>
</li>
<li><dl class="simple">
<dt><strong>Feedback</strong></dt><dd><ul class="simple">
<li><p><em>actual_pose</em> (<code class="docutils literal notranslate"><span class="pre">geometry_msgs/Pose</span></code>): The current position of the robot, which provides periodic updates during the movement. The <strong>Pose</strong> message includes the position (x, y, z) and orientation (roll, pitch, yaw) relative to the robot’s reference frame.</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><strong>Result</strong></p>
<blockquote>
<div><ul>
<li><p><em>stat</em> (<code class="docutils literal notranslate"><span class="pre">string</span></code>): A string indicating the status of the operation. Possible values include:</p>
<blockquote>
<div><ul class="simple">
<li><p><cite>“success”</cite>: The robot successfully reached the target position.</p></li>
<li><p><cite>“failure”</cite>: The robot failed to reach the target position (e.g., due to movement errors or unexpected obstacles).</p></li>
<li><p><cite>“in_progress”</cite>: The operation is still in progress, and the robot is moving toward the target position.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</li>
</ul>
<h4>Usage</h4><p>When this action is invoked, the <strong>target_pose</strong> represents the desired destination for the robot. The feedback (<code class="docutils literal notranslate"><span class="pre">actual_pose</span></code>) will be periodically sent to monitor the robot’s current position while moving toward the goal. At the end of the action, the result (<code class="docutils literal notranslate"><span class="pre">stat</span></code>) will indicate whether the operation was successfully completed or not.</p>
<h4>References</h4><p>See the <code class="docutils literal notranslate"><span class="pre">geometry_msgs/PoseStamped</span></code> and <code class="docutils literal notranslate"><span class="pre">geometry_msgs/Pose</span></code> message types for more details on the structure of the target and actual poses.</p>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Marmolino Giorgio.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>